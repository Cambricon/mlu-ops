## MLU-OPS Coverage Test 使用指南
### 0. 环境要求
需要安装好cntoolkit、libxml2-dev、libprotobuf-dev<=3.8.0、protobuf-compiler<=3.8.0、llvm-6.0-dev、lcov 、html2text

### 1. 编译

当前mlu-ops采用了 -c 编译选项 ，指定编译板卡和算子名，编译方式：

```
$cd mlu-ops
mlu-ops$cd bangc-ops
# 若NEUWARE_HOME不是默认路径则一定要指定NEUWARE_HOME，否则出现llvm-protobuf: command not found
bangc-ops$./build.sh -c --mlu370 --filter=*abs*
```

### 2. 测试

```
bangc-ops$cd build/test
test$ ../../../tools/coverage.sh "./mluop_gtest --gtest_filter=*abs*"
# 若正反向算子在一个文件时，例如roi_crop_forward, roi_crop_backward, 应设置 --gtest_filter=*roi_crop*
```

### 3. 结果
```
Overall coverage rate:
  lines......: 24.8% (82 of 330 lines)
  functions..: 9.2% (7 of 76 functions)
LCOV - code coverage report
Current view: top_level - kernels/abs             Hit Total Coverage
Test:         unnamed                  Lines:     18  40    45.0 %
Date:         2023-08-21 19:55:05      Functions: 3   8     37.5 %

# 下面部分写进测试报告即可(正式算子kernel 各代码文本 Line Coverage不低于95%)
  Filename [Sort by Line Coverage [Sort_by_line_coverage] Functions [Sort_by
  name]                                                   function_coverage]
  abs_block.mlu     [45.0%][45.0%] 45.0 %18 / 40         37.5 %3 / 8

Generated by: LCOV_version_1.14
```
